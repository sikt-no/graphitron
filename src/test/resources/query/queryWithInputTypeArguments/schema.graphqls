type PageInfo {
  hasPreviousPage: Boolean!
  hasNextPage: Boolean!
  startCursor: String
  endCursor: String
}

type PersonEpost {
  privatEpost: String @column(name : "EMAILADRESSE_PRIVAT")
  arbeidsEpost: String! @column(name : "EMAILADRESSE_ARBEID")
  institusjonsEpost: String @column(name : "EMAILADRESSE")
}

input PersonInput {
  fornavn: String
  "Optional"
  etternavn: String!
  "Mandatory"
  epost: PersonInputEpost
}

input PersonInputEpost {
  privatEpost: String @column(name : "EMAILADRESSE_PRIVAT")
  arbeidsEpost: String! @column(name : "EMAILADRESSE_ARBEID")
}

type PersonProfil implements Node @table(name : "PERSON") {
  id: ID!
  fornavn: String!
  etternavn: String!
  epost: PersonEpost
}

type PersonProfilConnection {
  edges: [PersonProfilConnectionEdge]
  pageInfo: PageInfo
  nodes: [PersonProfil!]!
}

type PersonProfilConnectionEdge {
  cursor: String
  node: PersonProfil
}

type Query {
  personNoPage(eierInstitusjonsnummer: String! @column(name : "INSTITUSJONSNR_EIER"), personlopenummer: [Int!] @column(name : "PERSONLOPENR"), pin: PersonInput): PersonProfil
  personWithPage(eierInstitusjonsnummer: String! @column(name : "INSTITUSJONSNR_EIER"), personlopenummer: [Int!] @column(name : "PERSONLOPENR"), pin: PersonInput, first: Int = 100, after: String): PersonProfilConnection!
  studenter(eierInstitusjonsnummer: String! @column(name : "INSTITUSJONSNR_EIER"), first: Int = 100, after: String): QueryStudentVedInstitusjonConnection
}

type QueryStudentVedInstitusjonConnection {
  edges: [QueryStudentVedInstitusjonConnectionEdge]
  pageInfo: PageInfo
  nodes: [StudentVedInstitusjon!]!
}

type QueryStudentVedInstitusjonConnectionEdge {
  cursor: String
  node: StudentVedInstitusjon
}

type Semesterregistrering implements Node @table {
  id: ID!
  registrert: Boolean! @column(name : "STATUS_REG_OK")
}

input SemesterregistreringsterminInput {
  maned: Int! @column(name : "MANEDNR_START", table : "TERMIN", key : "SEMESTERREGISTRERING__HAR__TERMIN__FK")
  termintype: Termintype! @column(name : "TERMINKODE", table : "TERMIN", key : "SEMESTERREGISTRERING__HAR__TERMIN__FK")
}

input SemesterregistreringsterminInputWithOneField {
  maned: Int! @column(name : "MANEDNR_START", table : "TERMIN", key : "SEMESTERREGISTRERING__HAR__TERMIN__FK")
}

input SemesterregistreringsterminNestedInput {
  manedField: SemesterregistreringsterminInputWithOneField!
  termintype: Termintype! @column(name : "TERMINKODE", table : "TERMIN", key : "SEMESTERREGISTRERING__HAR__TERMIN__FK")
}

type StudentVedInstitusjon implements Node @table(name : "STUDENT") {
  id: ID!
  semesterregistreringer(terminIn: SemesterregistreringsterminInput!): [Semesterregistrering!]! @splitQuery
  registreringerForInputList(terminInList: [SemesterregistreringsterminInput!]): [Semesterregistrering!]! @splitQuery
  registreringerForMixOfListAndSingleInput(terminIn: SemesterregistreringsterminInput!, terminInList: [SemesterregistreringsterminInput!]): [Semesterregistrering!]! @splitQuery
  registreringerForInputWithOneFieldList(terminInListOneField: [SemesterregistreringsterminInputWithOneField!]): [Semesterregistrering!]! @splitQuery
  registreringerForInputWithNestedFieldList(terminInListNestedField: [SemesterregistreringsterminNestedInput!]): [Semesterregistrering!]! @splitQuery
}

enum Termintype {
  VAR @mapEnum(name : "VÅR")
  SOM @mapEnum(name : "SOM")
  HOST @mapEnum(name : "HØST")
}
